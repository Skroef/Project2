(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab898"],{1663:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("customer-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar,update:t.update}}),a("vx-card",{ref:"MainCard",attrs:{title:""}},[a("vs-popup",{attrs:{fullscreen:"",title:"Quotation Viewer",active:t.popupActive},on:{"update:active":function(e){t.popupActive=e}}},[a("iframe",{staticStyle:{height:"100%",width:"100%","min-height":"1000px"},attrs:{src:t.quoteselected,frameborder:"0",allowfullscreen:"true"}})]),a("div",[a("vs-table",{ref:"quoteTable",staticClass:"vs-con-loading__container",attrs:{pagination:"","max-items":t.itemsPerPage,search:"",data:t.quotations},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{attrs:{data:e.quoteNr}},[t._v(t._s(e.quoteNr))]),a("vs-td",{attrs:{data:e.quoteRef}},[t._v(t._s(e.quoteRef))]),a("vs-td",{attrs:{data:e.customer}},[t._v(t._s(e.customer))]),a("vs-td",{attrs:{data:e.quoteDate}},[t._v(t._s(t.formatDate(e.quoteDate.replace("T"," ").split(".")[0])))]),a("vs-td",{attrs:{data:e.quoteExpiryDate}},[t._v(t._s(t.formatDate(e.quoteExpiryDate.replace("T"," ").split(".")[0])))]),a("vs-td",{attrs:{data:e.quoteTotal}},[t._v(t._s("R "+Number(e.quoteTotal).toLocaleString("en")))]),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("feather-icon",{attrs:{icon:"EyeIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(a){return a.stopPropagation(),t.viewData(e)}}}),a("feather-icon",{staticClass:"ml-2",attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(a){return a.stopPropagation(),t.editData(e)}}}),a("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(a){return a.stopPropagation(),t.deleteData(e)}}}),a("feather-icon",{staticClass:"ml-2",attrs:{icon:"FlagIcon",svgClasses:"w-5 h-5 hover:text-success stroke-current"},on:{click:function(a){return a.stopPropagation(),t.showStatusPrompt(e)}}})],1)],1)}))}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow",attrs:{slot:"header"},slot:"header"},[a("div",{ref:"addNewData",staticClass:"p-3 mr-4 rounded-lg cursor-pointer flex items-center justify-between text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:t.addNewData}},[a("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),a("span",{staticClass:"ml-2 text-base text-primary"},[t._v("Add New")])],1),a("vs-dropdown",{staticClass:"cursor-pointer mr-4",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.quotations.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.quotations.length)+" of "+t._s(t.quotations.length))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=50}}},[a("span",[t._v("50")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=100}}},[a("span",[t._v("100")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"quoteNr"}},[t._v("Quote No.")]),a("vs-th",{attrs:{"sort-key":"quoteRef"}},[t._v("Reference")]),a("vs-th",{attrs:{"sort-key":"customer"}},[t._v("Customer")]),a("vs-th",{staticStyle:{width:"115px"},attrs:{"sort-key":"quoteDate"}},[t._v("Created On")]),a("vs-th",{staticStyle:{width:"115px"},attrs:{"sort-key":"quoteExpiryDate"}},[t._v("Expire On")]),a("vs-th",{staticStyle:{width:"140px"},attrs:{"sort-key":"quoteTotal"}},[t._v("Total")]),a("vs-th",[t._v("Action")])],1)],2)],1),a("vs-prompt",{ref:"statusPrompt",attrs:{title:"Update Quote Status",acceptText:"Update",cancelText:"Cancel",active:t.statusPromptActive},on:{cancel:function(e){t.statusDropdown=0},accept:t.updateStatus,"update:active":function(e){t.statusPromptActive=e}}},[a("div",{staticClass:"con-exemple-prompt"},[a("div",[a("label",[t._v("Status")]),a("v-select",{attrs:{placeholder:"Choose Status",options:t.quoteStatusses},model:{value:t.statusDropdown,callback:function(e){t.statusDropdown=e},expression:"statusDropdown"}})],1),a("div",[a("label",[t._v("Comment")]),a("vs-textarea",{model:{value:t.changeStatusData.comment,callback:function(e){t.$set(t.changeStatusData,"comment",e)},expression:"changeStatusData.comment"}})],1)])])],1)],1)},o=[],r=(a("a481"),a("7f7f"),a("bc3a"),a("c38f")),n=a.n(r),i=(a("0952"),a("be3f")),u=a("c1df"),c=a.n(u),d=a("4a7a"),l=a.n(d),p={data:function(){return{statusPromptActive:!1,statusDropdown:0,quoteStatusses:[],itemsPerPage:10,quoteselected:"",selected:[],quotations:[],isMounted:!1,popupActive:!1,addNewDataSidebar:!1,sidebarData:{},formData:{id:0,accountID:0,categorycustomerid:0,currencyid:0,customer:"",name:"",vatNumber:"",address1:"",address2:"",address3:"",address4:"",postcalCode:"",contactName:"",contactEmail:"",contactPhone:"",contactMobile:"",webAddress:"",enable:1},changeStatusData:{quoteId:0,statusId:0,accountId:1,comment:""}}},components:{flatPickr:n.a,CustomerSidebar:i["a"],"v-select":l.a},mounted:function(){this.loadQuotation(),this.isMounted=!0},computed:{currentPage:function(){return this.isMounted?this.$refs.quoteTable.currentx:0}},methods:{formatDate:function(t){if(t)return c()(String(t)).format("YYYY-MM-DD")},showStatusPrompt:function(t){var e=this;e.changeStatusData={quoteId:t.qid,statusId:t.quoteStatusID,accountId:1,comment:""},e.getStatusses((function(){e.statusDropdown=e.quoteStatusses.filter((function(t){return t.value==e.changeStatusData.quoteStatusID}))[0]})),e.statusPromptActive=!0},updateStatus:function(){var t=this;t.statusDropdown&&(t.changeStatusData.statusId=t.statusDropdown.value)},addNewData:function(){this.$router.push({name:"quotationlayout"})},getStatusses:function(t){var e=this,a=function(a){e.quoteStatusses=a.data.map((function(t){return{label:t.name,value:t.id}})),t&&"function"==typeof t&&t()},s=function(){e.$vs.loading.close(e.$refs.statusPrompt.$el)};e.$ajaxGet(e,"SalesSeeker/SP_JsonResult?storeproc=CRUD_QuotationStatus&parameters=1",a,s)},viewData:function(t){this.quoteselected="",this.popupActive=!0,this.quoteselected="http://localhost:62620/ReportViewer.aspx?quoteID="+t.quoteNr.replace("QUO","")},editData:function(t){var e=this;e.$router.push({name:"quotationlayout",params:{quoteNr:t.qid}})},deleteData:function(t){var e=this;e.showLoadingOnElement("quoteTable",1,"radius");var a=function(t){e.loadQuotation()},s=function(){e.$vs.loading.close(e.$refs.quoteTable.$el)};e.$ajaxGet(e,"SalesSeeker/RemoveQuotation?quotesId="+t.qid,a,s)},update:function(t){var e=this;e.showLoadingOnElement("quoteTable",1,"radius");var a=function(t){e.loadcustomer()},s=function(){e.$vs.loading.close(e.$refs.quoteTable.$el)};e.$ajaxPost(e,"SalesSeeker/UpdateCustomer",t,a,s)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},showLoadingOnElement:function(t,e,a){var s=this;s.$vs.loading({type:a,container:s.$refs[t].$el,scale:e})},loadQuotation:function(){var t=this;t.showLoadingOnElement("quoteTable",1,"radius");var e=function(e){t.quotations=e.data},a=function(){t.$vs.loading.close(t.$refs.quoteTable.$el)};t.$ajaxGet(t,"SalesSeeker/Quotationlist?accountid=1&salesrepid=1",e,a)}}},v=p,m=a("2877"),f=Object(m["a"])(v,s,o,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0ab898.3e0dc687.js.map