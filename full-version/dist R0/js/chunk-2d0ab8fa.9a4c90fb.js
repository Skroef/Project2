(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab8fa"],{1698:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vx-card",{directives:[{name:"show",rawName:"v-show",value:!e.isListHidden,expression:"!isListHidden"}],ref:"MainCard"},[s("div",[s("vs-table",{ref:"gridTable",staticClass:"vs-con-loading__container",attrs:{pagination:"","max-items":e.itemsPerPage,search:"",data:e.PowerBiAPI},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return e._l(r,(function(t,r){return s("vs-tr",{key:r,attrs:{data:t}},[s("vs-td",{staticClass:"whitespace-no-wrap"},[s("feather-icon",{attrs:{icon:"EyeIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(s){return s.stopPropagation(),e.PBISelected(t)}}})],1),s("vs-td",{attrs:{data:t.pb[r].name}},[e._v(e._s(t.pb[r].name))]),s("vs-td",{directives:[{name:"show",rawName:"v-show",value:!e.isInfoHiddenPB,expression:"!isInfoHiddenPB"}],attrs:{data:t.pb[r].url}},[e._v(e._s(t.pb[r].url))]),s("vs-td",{attrs:{data:t.pb[r].powerType}},[e._v(e._s(t.pb[r].powerType))])],1)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[s("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow",attrs:{slot:"header"},slot:"header"},[s("vs-button",{attrs:{color:"warning",type:"gradient","icon-pack":"feather",icon:"icon-refresh-ccw"},on:{click:function(t){return e.GetGrid()}}},[e._v("Reload")]),s("vs-dropdown",{staticClass:"cursor-pointer mr-4",attrs:{"vs-trigger-click":""}},[s("div",{staticClass:"p-4 border border-solid border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[s("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.itemsPerPage-(e.itemsPerPage-1))+" - "+e._s(e.PowerBiAPI.length-e.currentPage*e.itemsPerPage>0?e.currentPage*e.itemsPerPage:e.PowerBiAPI.length)+" of "+e._s(e.PowerBiAPI.length))]),s("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),s("vs-dropdown-menu",[s("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=10}}},[s("span",[e._v("10")])]),s("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=20}}},[s("span",[e._v("20")])]),s("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=50}}},[s("span",[e._v("50")])]),s("vs-dropdown-item",{on:{click:function(t){e.itemsPerPage=100}}},[s("span",[e._v("100")])])],1)],1)],1),s("template",{slot:"thead"},[s("vs-th",[e._v("Action")]),s("vs-th",{attrs:{"sort-key":"Report"}},[e._v("Report")]),s("vs-th",{directives:[{name:"show",rawName:"v-show",value:!e.isInfoHiddenPB,expression:"!isInfoHiddenPB"}],attrs:{"sort-key":"PowerBi"}},[e._v("PowerBi")]),s("vs-th",{attrs:{"sort-key":"PowerType"}},[e._v("PowerType")])],1)],2)],1)]),s("vs-spacer"),s("br"),s("div",[s("vx-card",{directives:[{name:"show",rawName:"v-show",value:!e.isInfoHidden,expression:"!isInfoHidden"}],ref:"reportInfo",attrs:{id:"reportPowerbiCard"}},[s("div",{staticClass:"vx-row"},[s("vs-spacer"),s("div",{staticClass:"vx-col"})],1),s("div",{staticClass:"vx-row px-4 pb-3"},[s("div",{staticClass:"vx-col flex-1"},[s("h1",[s("span",[e._v(e._s(e.mreport))])]),s("vs-spacer"),s("h3",[s("span",[e._v(e._s("(Token valid - "+e.resultInMinutes+" mins!)"))])])],1),s("div",{staticClass:"vx-col flex-2"},[s("vs-button",{staticClass:"mb-2",attrs:{color:"warning",type:"border"},on:{click:e.cancelReportViewer}},[e._v("Close")])],1)]),s("vs-divider",{staticClass:"mb-6 pt-0"}),s("div",{ref:"container",staticStyle:{height:"78vh",width:"82vw"},attrs:{id:"container"}})],1)],1)],1)},n=[],o=(s("7f7f"),s("bc3a"),s("c38f")),a=s.n(o),i=(s("0952"),s("7599")),c=(s("3022"),s("c1df"),{data:function(){return{resultInMinutes:0,accesstoken:"",expiredate:"",itemsPerPage:10,selected:[],PowerBiAPI:[],PowerBiInfo:[],isMounted:!1,mtoken:"",mid:"",mreport:"",isListHidden:!1,isInfoHidden:!0,isInfoHiddenPB:!0}},components:{flatPickr:a.a},computed:{currentPage:function(){return this.isMounted?this.$refs.gridTable.currentx:0}},mounted:function(){this.GetGrid(),this.isMounted=!0},methods:{PBISelected:function(e){var t=this;t.isInfoHidden=!1,t.isListHidden=!0,t.mreport=e.pb[0].name,t.GetAccess_Token();var s={type:"report",accessToken:this.accesstoken,embedUrl:e.pb[0].url,pageView:"fitToWidth",settings:{filterPaneEnabled:!1,navContentPaneEnabled:!0,layoutType:i["models"].LayoutType.Custom,customLayout:{displayOption:i["models"].DisplayOption.ActualSize}}},r=document.getElementById("container"),n=new i["service"].Service(i["factories"].hpmFactory,i["factories"].wpmpFactory,i["factories"].routerFactory),o=n.embedNew(r,s);o.off("loaded"),o.on("loaded",(function(){console.log("Loaded")})),o.off("rendered")},GetAccess_Token:function(){var e=this;if("undefined"!=localStorage.accesstoken&&"undefined"!=localStorage.expiredate)try{var t=new Date,s=new Date(localStorage.expiredate),r=s.getTime()-t.getTime();e.resultInMinutes=Math.round(r/6e4),e.resultInMinutes>0?(e.accesstoken=localStorage.accesstoken,e.expiredate=localStorage.expiredate):e.refreshToken()}catch(n){e.refreshToken()}else e.refreshToken()},refreshToken:function(){var e=this;e.GetToken(),e.accesstoken=localStorage.accesstoken,e.expiredate=localStorage.expiredate,e.resultInMinutes<=0&&(e.resultInMinutes=59)},cancelReportViewer:function(){var e=this;e.isListHidden=!1,e.isInfoHidden=!0},successNotify:function(){this.$vs.notify({title:"Successfully",text:"Item successfully added | updated | removed",color:"success"})},FailedNotify:function(){this.$vs.notify({title:"Not Successfull",text:"Item not added",color:"danger"})},showLoadingOnElement:function(e,t,s){var r=this;r.$vs.loading({type:s,container:r.$refs[e].$el,scale:t})},GetGrid:function(){var e=this;e.showLoadingOnElement("gridTable",1,"radius");var t=function(t){e.PowerBiAPI=t.data},s=function(){e.$vs.loading.close(e.$refs.gridTable.$el)};e.$ajaxGet(e,"PowerBiAPI/12?username=csd",t,s)},GetToken:function(){var e=this,t=function(t){e.resultInMinutes=59,localStorage.removeItem("expiredate"),localStorage.removeItem("accesstoken"),localStorage.accesstoken=t.data.access_token,localStorage.expiredate=t.data.expire_Date},s=function(){};e.$ajaxGet(e,"PowerBiAPI/GetPowerbiAccessToken",t,s)}}}),d=c,l=s("2877"),u=Object(l["a"])(d,r,n,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0ab8fa.9a4c90fb.js.map