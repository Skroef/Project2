(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf747584"],{"0952":function(t,e,a){},"7b82":function(t,e,a){"use strict";var s=a("d3c7"),i=a.n(s);i.a},b4bc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("customer-sidebar",{attrs:{isSidebarActive:t.customerSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar,update:t.update,add:t.add}}),a("vx-card",{ref:"MainCard",attrs:{title:""}},[a("div",[a("vs-table",{ref:"customerTable",staticClass:"vs-con-loading__container",attrs:{pagination:"","max-items":t.itemsPerPage,search:"",data:t.customers},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{attrs:{data:e.customer}},[t._v(t._s(e.customer))]),a("vs-td",{attrs:{data:e.site}},[t._v(t._s(e.site))]),a("vs-td",{attrs:{data:e.contactName}},[t._v(t._s(e.contactName))]),a("vs-td",{attrs:{data:e.contactEmail}},[t._v(t._s(e.contactEmail))]),a("vs-td",{attrs:{data:e.contactPhone}},[t._v(t._s(e.contactPhone))]),a("vs-td",{attrs:{data:e.contactMobile}},[t._v(t._s(e.contactMobile))]),a("vs-td",{attrs:{data:e.description}},[t._v(t._s(e.description))]),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(a){return a.stopPropagation(),t.editData(e)}}}),a("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(a){return a.stopPropagation(),t.deleteData(e)}}})],1)],1)}))}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow",attrs:{slot:"header"},slot:"header"},[a("div",{ref:"addNewData",staticClass:"p-3 mr-4 rounded-lg cursor-pointer flex items-center justify-between text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:t.addNewData}},[a("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),a("span",{staticClass:"ml-2 text-base text-primary"},[t._v("Add New")])],1),a("vs-dropdown",{staticClass:"cursor-pointer mr-4",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.customers.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.customers.length)+" of "+t._s(t.customers.length))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=50}}},[a("span",[t._v("50")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=100}}},[a("span",[t._v("100")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"Customer"}},[t._v("Customer")]),a("vs-th",{attrs:{"sort-key":"Site"}},[t._v("Site")]),a("vs-th",{attrs:{"sort-key":"ContactName"}},[t._v("Contact Name")]),a("vs-th",{attrs:{"sort-key":"ContactEmail"}},[t._v("Contact Email")]),a("vs-th",{attrs:{"sort-key":"ContactPhone"}},[t._v("Contact Phone")]),a("vs-th",{attrs:{"sort-key":"ContactMobile"}},[t._v("Contact Mobile")]),a("vs-th",{attrs:{"sort-key":"Description"}},[t._v("Description")]),a("vs-th",[t._v("Action")])],1)],2)],1)])],1)},i=[],c=(a("bc3a"),a("c38f")),o=a.n(c),n=(a("0952"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v(t._s(0===Object.entries(this.data).length?"ADD NEW":"UPDATE")+" ITEM")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),a("vs-divider",{staticClass:"mb-0"}),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",[a("div",{staticClass:"vx-row px-4 pt-2 pb-3"},[a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Customer")]),a("v-select",{attrs:{options:t.customerDropdown,placeholder:"Search / Select Customer"},on:{"search:blur":t.populateData},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1)]),a("div",{staticClass:"vx-row px-4 pt-2 pb-3"},[a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Site Name")]),a("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user",placeholder:"Site Name",name:"Site Name"},model:{value:t.sitename,callback:function(e){t.sitename=e},expression:"sitename"}})],1)]),a("div",{staticClass:"vx-row px-4 pb-3"},[a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Contact Phone")]),a("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-phone",placeholder:"Contact Phone",name:"Contact Phone"},model:{value:t.cuscontactphone,callback:function(e){t.cuscontactphone=e},expression:"cuscontactphone"}})],1),a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Contact Name")]),a("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-user",placeholder:"Contact Name",name:"Contact Name"},model:{value:t.cuscontactname,callback:function(e){t.cuscontactname=e},expression:"cuscontactname"}})],1)]),a("div",{staticClass:"vx-row px-4 pb-3"},[a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Contact Email")]),a("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-at-sign",placeholder:"Contact Email",name:"item-contactEmail"},model:{value:t.cuscontactEmail,callback:function(e){t.cuscontactEmail=e},expression:"cuscontactEmail"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-contactEmail"),expression:"errors.has('item-contactEmail')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-contactEmail")))])],1),a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Contact Mobile")]),a("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-smartphone",placeholder:"Contact Mobile",name:"Contact Mobile"},model:{value:t.cuscontactmobile,callback:function(e){t.cuscontactmobile=e},expression:"cuscontactmobile"}})],1)]),a("div",{staticClass:"vx-row px-4 pb-3"},[a("div",{staticClass:"vx-col flex-1"},[a("label",[t._v("Site infrastructure")]),a("vs-textarea",{staticClass:"w-full",model:{value:t.cusdescription,callback:function(e){t.cusdescription=e},expression:"cusdescription"}})],1)])])]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",on:{click:t.submitData}},[t._v("Submit")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("Cancel")])],1)],1)}),r=[],l=(a("ac6a"),a("ffc1"),a("9d63")),u=a.n(l),d=a("4a7a"),m=a.n(d),v={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:u.a,"v-select":m.a},mounted:function(){this.loadcustomer()},data:function(){return{customer:"",customerID:null,siteID:null,sitename:"",cuscontactphone:"",cuscontactname:"",cuscontactEmail:"",cuscontactmobile:"",cusdescription:"",customerDropdown:[],settings:{maxScrollbarLength:60,wheelSpeed:.6}}},watch:{isSidebarActive:function(t){t&&(0===Object.entries(this.data).length?(this.initValues(),this.$validator.reset()):(this.siteID=this.data.siteID,this.customerID=this.data.customerID,this.customer=this.data.customer,this.sitename=this.data.site,this.cuscontactphone=this.data.contactPhone,this.cuscontactname=this.data.contactName,this.cuscontactEmail=this.data.contactEmail,this.cuscontactmobile=this.data.contactMobile,this.cusdescription=this.data.description,this.initValues()))}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{populateData:function(){var t=this;t.customer&&(t.customerID=t.customer.value)},initValues:function(){this.data.siteID&&this.data.customerID||(this.customer="",this.customerID=null,this.siteID=null,this.cusselect=0,this.sitename="",this.cuscontactphone="",this.cuscontactname="",this.cuscontactEmail="",this.cuscontactmobile="",this.cusdescription="")},showLoadingOnElement:function(t,e,a){var s=this;s.$vs.loading({type:a,container:s.$refs[t].$el,scale:e})},submitData:function(){var t=this,e={accountID:1,id:this.siteID,customerID:this.customerID,sitename:this.sitename,ContactName:this.cuscontactname,ContactEmail:this.cuscontactEmail,ContactPhone:this.cuscontactphone,ContactMobile:this.cuscontactmobile,Description:this.cusdescription};null!==this.siteID&&this.siteID>=0?t.$emit("update",e):(delete e.id,e.popularity=0,t.$emit("add",e)),this.$emit("closeSidebar"),this.initValues()},loadcustomer:function(){var t=this,e=function(e){t.customerDropdown=e.data.map((function(t){return{label:t.customer,value:t.id}}))},a=function(){};t.$ajaxGet(t,"SalesSeeker/SP_JsonResult?storeproc=CRUD_Customer_GetGrid&parameters=1",e,a)}}},h=v,p=(a("7b82"),a("2877")),f=Object(p["a"])(h,n,r,!1,null,"f76f8d9c",null),b=f.exports,C={data:function(){return{itemsPerPage:10,selected:[],customers:[],customererror:[],isMounted:!1,customerSidebar:!1,sidebarData:{},formData:{siteID:0,customerID:0,accountID:0,customer:"",site:"",contactName:"",contactEmail:"",contactPhone:"",contactMobile:"",description:""}}},components:{flatPickr:o.a,customerSidebar:b},mounted:function(){this.loadcustomersite(),this.isMounted=!0},computed:{currentPage:function(){return this.isMounted?this.$refs.customerTable.currentx:0}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){var e=this;e.showLoadingOnElement("customerTable",1,"radius");var a=function(t){e.loadcustomersite()},s=function(){e.$vs.loading.close(e.$refs.customerTable.$el)};e.$ajaxGet(e,"SalesSeeker/RemoveCustomerSite?siteId="+t.siteID,a,s)},editData:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},add:function(t){var e=this;e.showLoadingOnElement("customerTable",1,"radius");var a=function(t){e.loadcustomersite()},s=function(){e.$vs.loading.close(e.$refs.customerTable.$el)};e.$ajaxPost(e,"SalesSeeker/AddCustomerSite",t,a,s)},update:function(t){var e=this;e.showLoadingOnElement("customerTable",1,"radius");var a=function(t){e.loadcustomersite()},s=function(){e.$vs.loading.close(e.$refs.customerTable.$el)};e.$ajaxPost(e,"SalesSeeker/UpdateCustomerSite",t,a,s)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.customerSidebar=t},showLoadingOnElement:function(t,e,a){var s=this;s.$vs.loading({type:a,container:s.$refs[t].$el,scale:e})},loadcustomersite:function(){var t=this;t.showLoadingOnElement("customerTable",1,"radius");var e=function(e){t.customers=e.data},a=function(){t.$vs.loading.close(t.$refs.customerTable.$el)};t.$ajaxGet(t,"SalesSeeker/SP_JsonResult?storeproc=CRUD_CustomerSite_GetGrid&parameters=1",e,a)}}},g=C,x=Object(p["a"])(g,s,i,!1,null,null,null);e["default"]=x.exports},d3c7:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cf747584.0d914f97.js.map